//
//  Constants.swift
//  
//
//  Created by Ben Leggiero on 2020-08-30.
//

import Foundation



var currentContextDataSize: Int? { CGContext.current.map { Data(nilTerminatedBytes: $0.data!).count } }

let testImagePngData = Data([
    0x89,0x50,0x4E,0x47,0x0D,0x0A,0x1A,0x0A,0x00,0x00,0x00,0x0D,0x49,0x48,0x44,0x52,0x00,0x00,0x00,0x0C,0x00,0x00,0x00,
    0x0C,0x04,0x03,0x00,0x00,0x00,0xA4,0x5B,0x41,0xD4,0x00,0x00,0x00,0x12,0x50,0x4C,0x54,0x45,0x21,0x32,0xFA,0xFD,0x20,
    0xFA,0xFF,0x13,0x32,0x02,0xF3,0x21,0xFA,0x8D,0x09,0xFE,0xF3,0x01,0xBD,0xC1,0x82,0xCD,0x00,0x00,0x00,0x23,0x49,0x44,
    0x41,0x54,0x08,0xD7,0x63,0x50,0x32,0x66,0x70,0x11,0x0C,0x85,0x51,0x60,0x52,0x09,0x46,0x81,0x49,0x63,0x28,0x85,0xCA,
    0x61,0x80,0x08,0xC1,0x28,0x88,0x3C,0x94,0x02,0x00,0xF6,0x6B,0x0B,0xF5,0xE3,0x2A,0x97,0x06,0x00,0x00,0x00,0x00,0x49,
    0x45,0x4E,0x44,0xAE,0x42,0x60,0x82,
])



private extension Data {
    init(nilTerminatedBytes: UnsafeMutableRawPointer) {
        self.init()
        
        var nilTerminatedBytes = nilTerminatedBytes
        var currentByte = nilTerminatedBytes.load(as: UInt8.self)
        
        while currentByte != 0 {
            self.append(currentByte)
            nilTerminatedBytes = nilTerminatedBytes + 1
            currentByte = nilTerminatedBytes.load(as: UInt8.self)
        }
    }
}
